{% macro format_datetime(datetime) -%}
    {{ datetime.strftime('%Y-%m-%d %H:%M:%S') }}
{%- endmacro %}

{% macro format_date(datetime) -%}
    {{ datetime.strftime('%Y-%m-%d') }}
{%- endmacro %}

{% macro print_datasource_info(datasource) -%}
    <div class="row">
        <div class="col-xs-3"><h4>Code</h4></div>
        <div class="col-xs-9">{{ datasource.upload_code }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>Created</h4></div>
        <div class="col-xs-9">{{ format_datetime(datasource.created_at) }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>Type</h4></div>
        <div class="col-xs-9">{{ datasource.type.value|capitalize }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>Location</h4></div>
        <div class="col-xs-9">{{ datasource.location }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>File</h4></div>
        <div class="col-xs-9">{{ datasource.filename }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>Start Date</h4></div>
        <div class="col-xs-9">{{ datasource.start_date }}</div>
    </div>
    <div class="row">
        <div class="col-xs-3"><h4>End Date</h4></div>
        <div class="col-xs-9">{{ datasource.end_date }}</div>
    </div>
{%- endmacro %}


{% macro print_task_list(task_list) %}
     {% if task_list|length > 0 %}
        <table class="table table-bordered">
            <tbody>
            <tr>
                <th>name</th>
                <th>code</th>
                <th>created</th>
                <th>datasource</th>
                <th>status</th>
                <th></th>
            </tr>
                {% for task in task_list %}
                <tr>
                    <td scope="row">{{ task.name }}</td>
                    <td scope="row">{{ task.task_code }}</td>
                    <td>{{ format_datetime(task.created_at) }}</td>
                    <td>{{ task.datasource.upload_code }}</td>
                    <td>{{ task.statuses[-1].state }}</td>
                    <td>
                        <a href="{{ url_for('customer.view_prediction', task_code=task.task_code) }}">
                            <i class="fa fa-list"></i>
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="callout callout-warning">
            <h4>No task yet</h4>
            <p>As soon as you'll create some tasks you will be able to access them to visualize the
                result</p>
        </div>
    {% endif %}
{% endmacro %}
